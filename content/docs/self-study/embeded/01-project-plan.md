---
id: embeded-project-plan
title: 项目规划
sidebar_label: 01-项目规划
---

# 项目规划

> 在开始动手之前，先做好详细的规划，明确需求、技术选型和开发计划。

## 需求分析

### 功能需求

1. **基础运动**
   - 前进、后退、转向
   - 站立、坐下、趴下
   - 基础步态（trot、walk等）

2. **交互功能**
   - 蓝牙连接控制
   - WiFi连接（可选）
   - 触摸响应
   - LED状态指示

3. **扩展功能**
   - 动作库（挥手、点头等）
   - 传感器反馈（姿态检测）
   - 语音控制（可选）

### 性能指标

- **尺寸**：桌面级，约15-20cm长度
- **重量**：< 500g（含电池）
- **续航**：> 30分钟
- **响应速度**：舵机响应 < 100ms
- **稳定性**：能稳定行走和站立

## 技术选型

### 主控芯片

**选项1：ESP32**
- ✅ 优点：内置WiFi/蓝牙、丰富外设、Arduino生态好
- ❌ 缺点：实时性相对较弱
- **适用场景**：需要WiFi/蓝牙通信，对实时性要求不高

**选项2：STM32F4**
- ✅ 优点：实时性强、性能高、外设丰富
- ❌ 缺点：需要额外蓝牙模块
- **适用场景**：对实时性要求高，需要精确控制

**初步选择**：ESP32（便于快速原型开发，后续可升级）

### 执行器选型

**舵机类型**：
- **SG90**：便宜，但扭矩小（1.8kg·cm）
- **MG90S**：金属齿轮，扭矩中等（2.5kg·cm）
- **MG996R**：大扭矩（10kg·cm），但体积大

**初步选择**：MG90S（性价比高，适合桌面级）

### 电源方案

- **电池**：18650锂电池（3.7V，2600mAh）
- **稳压**：AMS1117-5V（舵机供电）+ AMS1117-3.3V（主控供电）
- **充电**：TP4056充电模块

### 通信方案

- **主要**：蓝牙4.0/5.0（低功耗）
- **可选**：WiFi（ESP32内置）

## 硬件架构

```
┌─────────────┐
│   ESP32     │
│  (主控)     │
└──────┬──────┘
       │
       ├─── I2C ─── IMU传感器
       ├─── UART ── 蓝牙模块（如需要）
       ├─── GPIO ── LED指示灯
       ├─── GPIO ── 触摸传感器
       │
       └─── PWM ─── 12路舵机控制
              │
              ├─── 左前腿（3个舵机）
              ├─── 右前腿（3个舵机）
              ├─── 左后腿（3个舵机）
              └─── 右后腿（3个舵机）
```

## 软件架构

```
┌─────────────────────┐
│   应用层             │
│  - 动作库            │
│  - 交互逻辑          │
└──────────┬──────────┘
           │
┌──────────▼──────────┐
│   控制层             │
│  - 步态规划          │
│  - 逆运动学          │
│  - 轨迹生成          │
└──────────┬──────────┘
           │
┌──────────▼──────────┐
│   驱动层             │
│  - 舵机驱动          │
│  - 传感器驱动        │
│  - 通信协议          │
└──────────┬──────────┘
           │
┌──────────▼──────────┐
│   硬件抽象层         │
│  - PWM控制           │
│  - I2C/SPI/UART      │
└─────────────────────┘
```

## 开发计划

### 第一阶段：硬件设计（2-3周）
- [ ] 原理图设计
- [ ] PCB布局
- [ ] 元器件采购
- [ ] PCB打样和焊接

### 第二阶段：3D建模（2-3周）
- [ ] Fusion360学习
- [ ] 结构设计
- [ ] 3D打印测试
- [ ] 装配验证

### 第三阶段：基础软件（2-3周）
- [ ] 开发环境搭建
- [ ] 舵机驱动开发
- [ ] 基础控制函数
- [ ] 单腿测试

### 第四阶段：控制算法（3-4周）
- [ ] 逆运动学实现
- [ ] 基础步态实现
- [ ] 动作库开发
- [ ] 稳定性调试

### 第五阶段：通信与交互（2周）
- [ ] 蓝牙通信协议
- [ ] 上位机开发（可选）
- [ ] 交互逻辑实现

### 第六阶段：优化与完善（2-3周）
- [ ] 性能优化
- [ ] 稳定性提升
- [ ] 功能完善
- [ ] 文档整理

## 开源资源

### 硬件参考
- 嘉立创开源硬件平台
- GitHub上的四足机器人项目
- Thingiverse上的3D模型

### 软件参考
- Arduino舵机库
- ESP32蓝牙示例
- 四足机器人控制算法开源项目


